<!DOCTYPE html>
<html lang="vi">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <meta name="description" content="Kh√°m ph√° v·∫≠n m·ªánh qua l√° b√†i Tarot huy·ªÅn b√≠. B√≥i b√†i online mi·ªÖn ph√≠ v·ªõi AI.">
    <meta name="theme-color" content="#7B68EE">
    <title>‚ú® Tarot Mystic - B√≥i B√†i Tarot Online</title>
    
    <!-- Favicon -->
    <link rel="icon" type="image/svg+xml" href="/favicon.svg">
    <link rel="alternate icon" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="manifest" href="/manifest.json">
    
    <link rel="stylesheet" href="styles.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Playfair+Display:wght@400;600;700&family=Nunito:wght@300;400;600;700&display=swap" rel="stylesheet">
</head>
<body>
    <!-- Animated Background -->
    <div class="stars-container">
        <div class="stars"></div>
        <div class="stars2"></div>
        <div class="stars3"></div>
    </div>
    
    <!-- Particle Background -->
    <canvas id="particleCanvas"></canvas>

    <!-- Audio Player (Hidden) -->
    <audio id="bgMusic" loop preload="auto">
        <!-- Local file (download first!) -->
        <source src="/music/background.mp3" type="audio/mpeg">
    </audio>

    <!-- Main Container -->
    <div class="container">
        <!-- Header -->
        <header class="header">
            <!-- Control Buttons -->
            <div class="header-controls">
                <button id="musicToggle" class="control-btn" title="B·∫≠t/T·∫Øt nh·∫°c n·ªÅn">
                    <span class="icon">üéµ</span>
                </button>
                <button id="themeToggle" class="control-btn" title="Chuy·ªÉn ƒë·ªïi theme">
                    <span class="icon">üåô</span>
                </button>
                <button id="historyToggle" class="control-btn" title="Xem l·ªãch s·ª≠">
                    <span class="icon">üìú</span>
                </button>
            </div>

            <h1 class="title">
                <span class="mystical-icon">‚ú®</span>
                K Tarot Mystic
                <span class="mystical-icon">üîÆ</span>
            </h1>
            <p class="subtitle">Kh√°m ph√° v·∫≠n m·ªánh qua l√° b√†i Tarot huy·ªÅn b√≠</p>
        </header>

        <!-- Home Page - Spread Selection -->
        <div id="homePage" class="page active">
            <div class="spread-grid">
                <div class="spread-card" data-spread="one">
                    <div class="card-icon">üé¥</div>
                    <h3>M·ªôt L√° B√†i</h3>
                    <p>C√¢u tr·∫£ l·ªùi nhanh cho m·ªôt c√¢u h·ªèi</p>
                </div>

                <div class="spread-card" data-spread="three">
                    <div class="card-icon">üîÆ</div>
                    <h3>Ba L√° B√†i</h3>
                    <p>Qu√° kh·ª© - Hi·ªán t·∫°i - T∆∞∆°ng lai</p>
                </div>

                <div class="spread-card" data-spread="five">
                    <div class="card-icon">‚≠ê</div>
                    <h3>NƒÉm L√° B√†i</h3>
                    <p>Ph√¢n t√≠ch s√¢u t√¨nh hu·ªëng</p>
                </div>

                <div class="spread-card" data-spread="celtic-cross">
                    <div class="card-icon">‚úùÔ∏è</div>
                    <h3>Celtic Cross</h3>
                    <p>Tr·∫£i b√†i truy·ªÅn th·ªëng 10 l√°</p>
                </div>

                <div class="spread-card" data-spread="past-present-future">
                    <div class="card-icon">‚è≥</div>
                    <h3>Qu√° Kh·ª©/Hi·ªán T·∫°i/T∆∞∆°ng Lai</h3>
                    <p>Ba giai ƒëo·∫°n c·ªßa cu·ªôc ƒë·ªùi</p>
                </div>

                <div class="spread-card" data-spread="mind-body-spirit">
                    <div class="card-icon">üßò</div>
                    <h3>T√¢m/Th√¢n/Th·∫ßn</h3>
                    <p>C√¢n b·∫±ng n·ªôi t√¢m</p>
                </div>

                <div class="spread-card" data-spread="existing-relationship">
                    <div class="card-icon">üíë</div>
                    <h3>M·ªëi Quan H·ªá Hi·ªán T·∫°i</h3>
                    <p>Ph√¢n t√≠ch t√¨nh c·∫£m</p>
                </div>

                <div class="spread-card" data-spread="potential-relationship">
                    <div class="card-icon">üíù</div>
                    <h3>M·ªëi Quan H·ªá Ti·ªÅm NƒÉng</h3>
                    <p>Kh·∫£ nƒÉng ph√°t tri·ªÉn t√¨nh c·∫£m</p>
                </div>

                <div class="spread-card" data-spread="making-decision">
                    <div class="card-icon">ü§î</div>
                    <h3>Ra Quy·∫øt ƒê·ªãnh</h3>
                    <p>L·ª±a ch·ªçn ƒë√∫ng ƒë·∫Øn</p>
                </div>

                <div class="spread-card" data-spread="law-of-attraction">
                    <div class="card-icon">üåü</div>
                    <h3>Lu·∫≠t H·∫•p D·∫´n</h3>
                    <p>Thu h√∫t ƒëi·ªÅu t·ªët ƒë·∫πp</p>
                </div>

                <div class="spread-card" data-spread="release-retain">
                    <div class="card-icon">üîÑ</div>
                    <h3>Bu√¥ng B·ªè & Gi·ªØ L·∫°i</h3>
                    <p>C√¢n b·∫±ng cu·ªôc s·ªëng</p>
                </div>

                <div class="spread-card" data-spread="asset-hindrance">
                    <div class="card-icon">‚öñÔ∏è</div>
                    <h3>L·ª£i Th·∫ø & Tr·ªü Ng·∫°i</h3>
                    <p>ƒê√°nh gi√° t√¨nh hu·ªëng</p>
                </div>
            </div>
        </div>

        <!-- Reading Page -->
        <div id="readingPage" class="page">
            <button class="back-btn" id="backBtn">
                <span>‚Üê</span> Quay l·∫°i
            </button>

            <div class="reading-container">
                <h2 id="spreadTitle" class="spread-title"></h2>
                
                <!-- Question Input -->
                <div class="input-section">
                    <div class="input-group">
                        <label for="questionInput">
                            <span class="label-icon">üí≠</span>
                            C√¢u h·ªèi c·ªßa b·∫°n (t√πy ch·ªçn)
                        </label>
                        <textarea 
                            id="questionInput" 
                            placeholder="Nh·∫≠p c√¢u h·ªèi b·∫°n mu·ªën h·ªèi l√° b√†i..."
                            rows="3"
                        ></textarea>
                    </div>

                    <!-- Significator Selection (only for law-of-attraction) -->
                    <div class="input-group" id="sigGroup" style="display: none;">
                        <label for="sigInput">
                            <span class="label-icon">üéØ</span>
                            Significator (t√πy ch·ªçn)
                        </label>
                        <input 
                            type="text" 
                            id="sigInput" 
                            placeholder="Nh·∫≠p t√™n ng·∫Øn c·ªßa l√° b√†i significator..."
                            list="cardSuggestions"
                        >
                        <datalist id="cardSuggestions">
                            <!-- Will be populated dynamically -->
                        </datalist>
                    </div>

                    <button class="divine-btn" id="divineBtn">
                        <span class="btn-text">B·∫Øt ƒê·∫ßu B√≥i</span>
                        <span class="btn-icon">üîÆ</span>
                    </button>
                </div>

                <!-- Loading State -->
                <div class="loading" id="loadingState" style="display: none;">
                    <div class="crystal-ball">
                        <div class="glow"></div>
                        <div class="inner-glow"></div>
                    </div>
                    <p class="loading-text">ƒêang k·∫øt n·ªëi v·ªõi v≈© tr·ª•...</p>
                </div>

                <!-- Card Shuffle Animation -->
                <div class="shuffle-animation" id="shuffleAnimation" style="display: none;">
                    <div class="shuffle-container">
                        <div class="shuffle-card"></div>
                        <div class="shuffle-card"></div>
                        <div class="shuffle-card"></div>
                        <div class="shuffle-card"></div>
                        <div class="shuffle-card"></div>
                    </div>
                    <p class="shuffle-text">ƒêang x√†o b√†i...</p>
                </div>

                <!-- Results Section Wrapper -->
                <div id="resultsWrapper" style="display: none;">
                    <!-- Share Button -->
                    <div class="share-section">
                        <button id="shareBtn" class="share-btn">
                            <span class="icon">üì§</span>
                            Chia s·∫ª k·∫øt qu·∫£
                        </button>
                        <button id="saveBtn" class="share-btn secondary">
                            <span class="icon">üíæ</span>
                            L∆∞u v√†o l·ªãch s·ª≠
                        </button>
                    </div>

                    <!-- Results Grid: Cards + Content -->
                    <div id="resultsSection">
                        <!-- Tarot Cards Display -->
                        <div class="cards-display" id="cardsDisplay">
                            <!-- Cards will be rendered here -->
                        </div>

                        <!-- Reading Results -->
                        <div class="results-content" id="resultsContent">
                            <!-- Results will be rendered here -->
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- History Sidebar -->
        <div id="historySidebar" class="history-sidebar">
            <div class="history-header">
                <h2>üìú L·ªãch S·ª≠ B√≥i B√†i</h2>
                <button id="closeHistory" class="close-btn">‚úï</button>
            </div>
            <div class="history-content" id="historyContent">
                <!-- History items will be rendered here -->
            </div>
            <div class="history-footer">
                <button id="clearHistory" class="clear-btn">üóëÔ∏è X√≥a t·∫•t c·∫£</button>
            </div>
        </div>
    </div>

    <!-- Share Modal -->
    <div id="shareModal" class="modal">
        <div class="modal-content">
            <div class="modal-header">
                <h2>üì§ Chia S·∫ª K·∫øt Qu·∫£</h2>
                <button class="close-modal">‚úï</button>
            </div>
            <div class="modal-body">
                <div class="share-options">
                    <button class="share-option" data-platform="copy">
                        <span class="icon">üìã</span>
                        <span>Sao ch√©p link</span>
                    </button>
                    <button class="share-option" data-platform="facebook">
                        <span class="icon">üìò</span>
                        <span>Facebook</span>
                    </button>
                    <button class="share-option" data-platform="twitter">
                        <span class="icon">üê¶</span>
                        <span>Twitter</span>
                    </button>
                    <button class="share-option" data-platform="whatsapp">
                        <span class="icon">üí¨</span>
                        <span>WhatsApp</span>
                    </button>
                    <button class="share-option" data-platform="telegram">
                        <span class="icon">‚úàÔ∏è</span>
                        <span>Telegram</span>
                    </button>
                    <button class="share-option" data-platform="email">
                        <span class="icon">üìß</span>
                        <span>Email</span>
                    </button>
                </div>
                <div class="share-link-container" style="display: none;">
                    <input type="text" id="shareLink" readonly>
                    <button id="copyLinkBtn">Sao ch√©p</button>
                </div>
            </div>
        </div>
    </div>

    <!-- Footer -->
    <footer class="footer">
        <p>‚ú® K Tarot Mystic ¬© 2025 - Kh√°m ph√° b·∫£n th√¢n qua ngh·ªá thu·∫≠t b√≥i Tarot ‚ú®</p>
    </footer>

    <script src="particles.js"></script>
    <script src="app.js"></script>
</body>
</html>
